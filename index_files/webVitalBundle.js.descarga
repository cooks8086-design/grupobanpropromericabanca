(()=>{"use strict";class t{t;o=0;i=[];u(t){if(t.hadRecentInput)return;const e=this.i[0],n=this.i.at(-1);this.o&&e&&n&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(this.o+=t.value,this.i.push(t)):(this.o=t.value,this.i=[t]),this.t?.(t)}}const e=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},n=t=>{if("loading"===document.readyState)return"loading";{const n=e();if(n){if(t<n.domInteractive)return"loading";if(0===n.domContentLoadedEventStart||t<n.domContentLoadedEventStart)return"dom-interactive";if(0===n.domComplete||t<n.domComplete)return"dom-content-loaded"}}return"complete"},i=t=>{const e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},r=t=>{let e="";try{for(;9!==t?.nodeType;){const n=t,r=n.id?"#"+n.id:[i(n),...Array.from(n.classList).sort()].join(".");if(e.length+r.length>99)return e||r;if(e=e?r+">"+e:r,n.id)break;t=n.parentNode}}catch{}return e},a=new WeakMap;function o(t,e){return a.get(t)||a.set(t,new e),a.get(t)}let s=-1;const c=()=>s,l=t=>{addEventListener("pageshow",(e=>{e.persisted&&(s=e.timeStamp,t(e))}),!0)},d=(t,e,n,i)=>{let r,a;return o=>{e.value>=0&&(o||i)&&(a=e.value-(r??0),(a||void 0===r)&&(r=e.value,e.delta=a,e.rating=((t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good")(e.value,n),t(e)))}},u=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},m=()=>{const t=e();return t?.activationStart??0},g=(t,n=-1)=>{const i=e();let r="navigate";return c()>=0?r="back-forward-cache":i&&(document.prerendering||m()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:t,value:n,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},p=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const i=new PerformanceObserver((t=>{Promise.resolve().then((()=>{e(t.getEntries())}))}));return i.observe({type:t,buffered:!0,...n}),i}}catch{}},h=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let f=-1;const v=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,T=t=>{"hidden"===document.visibilityState&&f>-1&&(f="visibilitychange"===t.type?t.timeStamp:0,b())},y=()=>{addEventListener("visibilitychange",T,!0),addEventListener("prerenderingchange",T,!0)},b=()=>{removeEventListener("visibilitychange",T,!0),removeEventListener("prerenderingchange",T,!0)},S=()=>{if(f<0){const t=m(),e=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((e=>"hidden"===e.name&&e.startTime>t))[0]?.startTime;f=e??v(),y(),l((()=>{setTimeout((()=>{f=v(),y()}))}))}return{get firstHiddenTime(){return f}}},E=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},w=[1800,3e3],D=(t,e={})=>{E((()=>{const n=S();let i,r=g("FCP");const a=p("paint",(t=>{for(const e of t)"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-m(),0),r.entries.push(e),i(!0)))}));a&&(i=d(t,r,w,e.reportAllChanges),l((n=>{r=g("FCP"),i=d(t,r,w,e.reportAllChanges),u((()=>{r.value=performance.now()-n.timeStamp,i(!0)}))})))}))},M=[.1,.25],L=t=>t.find((t=>1===t.node?.nodeType))||t[0];let C=0,k=1/0,P=0;const A=t=>{for(const e of t)e.interactionId&&(k=Math.min(k,e.interactionId),P=Math.max(P,e.interactionId),C=P?(P-k)/7+1:0)};let x;const I=()=>x?C:performance.interactionCount??0;let F=0;class O{l=[];h=new Map;m;p;v(){F=I(),this.l.length=0,this.h.clear()}M(){const t=Math.min(this.l.length-1,Math.floor((I()-F)/50));return this.l[t]}u(t){if(this.m?.(t),!t.interactionId&&"first-input"!==t.entryType)return;const e=this.l.at(-1);let n=this.h.get(t.interactionId);if(n||this.l.length<10||t.duration>e.T){if(n?t.duration>n.T?(n.entries=[t],n.T=t.duration):t.duration===n.T&&t.startTime===n.entries[0].startTime&&n.entries.push(t):(n={id:t.interactionId,entries:[t],T:t.duration},this.h.set(n.id,n),this.l.push(n)),this.l.sort(((t,e)=>e.T-t.T)),this.l.length>10){const t=this.l.splice(10);for(const e of t)this.h.delete(e.id)}this.p?.(n)}}}const B=t=>{const e=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?t():(t=h(t),document.addEventListener("visibilitychange",t,{once:!0}),e((()=>{t(),document.removeEventListener("visibilitychange",t)})))},j=[200,500];class N{m;u(t){this.m?.(t)}}const R=[2500,4e3],q=[800,1800],W=t=>{document.prerendering?E((()=>W(t))):"complete"!==document.readyState?addEventListener("load",(()=>W(t)),!0):setTimeout(t)},H=new Set;function U(t){H.add(t)}function V(){var t,e;return null===(e=null===(t=null===window||void 0===window?void 0:window.performanceHub)||void 0===t?void 0:t.config)||void 0===e?void 0:e.webVitals}function $(t){var e,n,i,r;let a={},o=V();if(o&&(null===(n=null===(e=null==o?void 0:o.attribution)||void 0===e?void 0:e.enabledFor)||void 0===n?void 0:n.includes(t.name))&&(null===(r=null===(i=null==o?void 0:o.attribution)||void 0===i?void 0:i.ratings)||void 0===r?void 0:r.includes(t.rating)))switch(t.name){case"CLS":a.debugTarget=t.attribution.largestShiftTarget,a.delta=t.delta;break;case"INP":a.debugTarget=t.attribution.interactionTarget,a.delta=t.delta,a.inputDelay=t.attribution.inputDelay,a.processingDuration=t.attribution.processingDuration;break;case"LCP":a.debugTarget=t.attribution.target}return{name:t.name,value:t.value,rating:t.rating,attribution:a}}function z(){if(H.size>0){const e=[...H].map($),n=V(),i=null===(t=null===window||void 0===window?void 0:window.performanceHub)||void 0===t?void 0:t.context;if(!(n&&i&&i.dealerId&&i.pageType))return void console.log("No context or dealerId or pageType. Skipping web vital data send.");const r={url:window.location.href,metrics:e,dealerId:i.dealerId,pageType:i.pageType},a=JSON.stringify(r),o=null==n?void 0:n.apiEndpoint;o&&fetch(o,{method:"POST",body:a,headers:{"Content-Type":"application/json"}}),H.clear()}var t}((e,i={})=>{const a=o(i=Object.assign({},i),t),s=new WeakMap;a.t=t=>{if(t?.sources?.length){const e=L(t.sources);if(e){const t=(i.generateTarget??r)(e.node);s.set(e,t)}}},((e,n={})=>{D(h((()=>{let i,r=g("CLS",0);const a=o(n,t),s=t=>{for(const e of t)a.u(e);a.o>r.value&&(r.value=a.o,r.entries=a.i,i())},c=p("layout-shift",s);c&&(i=d(e,r,M,n.reportAllChanges),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(s(c.takeRecords()),i(!0))})),l((()=>{a.o=0,r=g("CLS",0),i=d(e,r,M,n.reportAllChanges),u((()=>i()))})),setTimeout(i))})))})((t=>{const i=(t=>{let e={};if(t.entries.length){const i=t.entries.reduce(((t,e)=>t.value>e.value?t:e));if(i?.sources?.length){const t=L(i.sources);t&&(e={largestShiftTarget:s.get(t),largestShiftTime:i.startTime,largestShiftValue:i.value,largestShiftSource:t,largestShiftEntry:i,loadState:n(i.startTime)})}}return Object.assign(t,{attribution:e})})(t);e(i)}),i)})(U),((t,e={})=>{const i=o(e=Object.assign({},e),O);let a=[],s=[],c=0;const u=new WeakMap,m=new WeakMap;let h=!1;const f=()=>{h||(B(v),h=!0)},v=()=>{const t=i.l.map((t=>u.get(t.entries[0]))),e=s.length-50;s=s.filter(((n,i)=>i>=e||t.includes(n)));const n=new Set;for(const t of s){const e=T(t.startTime,t.processingEnd);for(const t of e)n.add(t)}const r=a.length-1-50;a=a.filter(((t,e)=>t.startTime>c&&e>r||n.has(t))),h=!1};i.m=t=>{const e=t.startTime+t.duration;let n;c=Math.max(c,t.processingEnd);for(let i=s.length-1;i>=0;i--){const r=s[i];if(Math.abs(e-r.renderTime)<=8){n=r,n.startTime=Math.min(t.startTime,n.startTime),n.processingStart=Math.min(t.processingStart,n.processingStart),n.processingEnd=Math.max(t.processingEnd,n.processingEnd),n.entries.push(t);break}}n||(n={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:e,entries:[t]},s.push(n)),(t.interactionId||"first-input"===t.entryType)&&u.set(t,n),f()},i.p=t=>{if(!m.get(t)){const n=(e.generateTarget??r)(t.entries[0].target);m.set(t,n)}};const T=(t,e)=>{const n=[];for(const i of a)if(!(i.startTime+i.duration<t)){if(i.startTime>e)break;n.push(i)}return n},y=t=>{const e=t.entries[0],r=u.get(e),a=e.processingStart,o=Math.max(e.startTime+e.duration,a),s=Math.min(r.processingEnd,o),c=r.entries.sort(((t,e)=>t.processingStart-e.processingStart)),l=T(e.startTime,s),d=i.h.get(e.interactionId),g={interactionTarget:m.get(d),interactionType:e.name.startsWith("key")?"keyboard":"pointer",interactionTime:e.startTime,nextPaintTime:o,processedEventEntries:c,longAnimationFrameEntries:l,inputDelay:a-e.startTime,processingDuration:s-a,presentationDelay:o-s,loadState:n(e.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};return(t=>{if(!t.longAnimationFrameEntries?.length)return;const e=t.interactionTime,n=t.inputDelay,i=t.processingDuration;let r,a,o=0,s=0,c=0,l=0;for(const c of t.longAnimationFrameEntries){s=s+c.startTime+c.duration-c.styleAndLayoutStart;for(const t of c.scripts){const c=t.startTime+t.duration;if(c<e)continue;const d=c-Math.max(e,t.startTime),u=t.duration?d/t.duration*t.forcedStyleAndLayoutDuration:0;o+=d-u,s+=u,d>l&&(a=t.startTime<e+n?"input-delay":t.startTime>=e+n+i?"presentation-delay":"processing-duration",r=t,l=d)}}const d=t.longAnimationFrameEntries.at(-1),u=d?d.startTime+d.duration:0;u>=e+n+i&&(c=t.nextPaintTime-u),r&&a&&(t.longestScript={entry:r,subpart:a,intersectingDuration:l}),t.totalScriptDuration=o,t.totalStyleAndLayoutDuration=s,t.totalPaintDuration=c,t.totalUnattributedDuration=t.nextPaintTime-e-o-s-c})(g),Object.assign(t,{attribution:g})};p("long-animation-frame",(t=>{a=a.concat(t),f()})),((t,e={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&E((()=>{"interactionCount"in performance||x||(x=p("event",A,{type:"event",buffered:!0,durationThreshold:0}));let n,i=g("INP");const r=o(e,O),a=t=>{B((()=>{for(const e of t)r.u(e);const e=r.M();e&&e.T!==i.value&&(i.value=e.T,i.entries=e.entries,n())}))},s=p("event",a,{durationThreshold:e.durationThreshold??40});n=d(t,i,j,e.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(a(s.takeRecords()),n(!0))})),l((()=>{r.v(),i=g("INP"),n=d(t,i,j,e.reportAllChanges)})))}))})((e=>{const n=y(e);t(n)}),e)})(U),((t,n={})=>{const i=o(n=Object.assign({},n),N),a=new WeakMap;i.m=t=>{if(t.element){const e=(n.generateTarget??r)(t.element);a.set(t,e)}},((t,e={})=>{E((()=>{const n=S();let i,r=g("LCP");const a=o(e,N),s=t=>{e.reportAllChanges||(t=t.slice(-1));for(const e of t)a.u(e),e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-m(),0),r.entries=[e],i())},c=p("largest-contentful-paint",s);if(c){i=d(t,r,R,e.reportAllChanges);const n=h((()=>{s(c.takeRecords()),c.disconnect(),i(!0)}));for(const t of["keydown","click","visibilitychange"])addEventListener(t,(()=>B(n)),{capture:!0,once:!0});l((n=>{r=g("LCP"),i=d(t,r,R,e.reportAllChanges),u((()=>{r.value=performance.now()-n.timeStamp,i(!0)}))}))}}))})((n=>{const i=(t=>{let n={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){const i=e();if(i){const e=i.activationStart||0,r=t.entries.at(-1),o=r.url&&performance.getEntriesByType("resource").filter((t=>t.name===r.url))[0],s=Math.max(0,i.responseStart-e),c=Math.max(s,o?(o.requestStart||o.startTime)-e:0),l=Math.min(t.value,Math.max(c,o?o.responseEnd-e:0));n={target:a.get(r),timeToFirstByte:s,resourceLoadDelay:c-s,resourceLoadDuration:l-c,elementRenderDelay:t.value-l,navigationEntry:i,lcpEntry:r},r.url&&(n.url=r.url),o&&(n.lcpResourceEntry=o)}}return Object.assign(t,{attribution:n})})(n);t(i)}),n)})(U),((t,i={})=>{D((i=>{const r=(t=>{let i={timeToFirstByte:0,firstByteToFCP:t.value,loadState:n(c())};if(t.entries.length){const r=e(),a=t.entries.at(-1);if(r){const e=r.activationStart||0,o=Math.max(0,r.responseStart-e);i={timeToFirstByte:o,firstByteToFCP:t.value-o,loadState:n(t.entries[0].startTime),navigationEntry:r,fcpEntry:a}}}return Object.assign(t,{attribution:i})})(i);t(r)}),i)})(U),((t,n={})=>{((t,n={})=>{let i=g("TTFB"),r=d(t,i,q,n.reportAllChanges);W((()=>{const a=e();a&&(i.value=Math.max(a.responseStart-m(),0),i.entries=[a],r(!0),l((()=>{i=g("TTFB",0),r=d(t,i,q,n.reportAllChanges),r(!0)})))}))})((e=>{const n=(t=>{let e={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(t.entries.length){const n=t.entries[0],i=n.activationStart||0,r=Math.max((n.workerStart||n.fetchStart)-i,0),a=Math.max(n.domainLookupStart-i,0),o=Math.max(n.connectStart-i,0),s=Math.max(n.connectEnd-i,0);e={waitingDuration:r,cacheDuration:a-r,dnsDuration:o-a,connectionDuration:s-o,requestDuration:t.value-s,navigationEntry:n}}return Object.assign(t,{attribution:e})})(e);t(n)}),n)})(U),function(t){const e=V();if(null==e?void 0:e.enableTBTTracking){let e=0,n={name:"TBT",value:0,rating:"good"};if(!PerformanceObserver)return;new PerformanceObserver((function(i){let r=i.getEntries();for(const t of r)e+=t.duration-50;n.value=e,e<200?n.rating="good":e>=200&&e<500?n.rating="needs-improvement":e>=500&&(n.rating="poor"),t(n)})).observe({type:"longtask",buffered:!0})}}(U),addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&z()})),window.addEventListener("pagehide",z)})();
//# sourceMappingURL=webVitalBundle.js.map